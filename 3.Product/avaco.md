# AVACO 시스템 개요

## 시스템 구성
- **PC 구성**: 시스템당 PC 2대
- **카메라 구성**: PC당 4개 카메라, 총 8대 설치
- **설치 위치**: A, B, C, D 레인 (상하로 설치)
- **주요 기능**: 경계선 검출 → 기준선과 비교 → 차이값을 PLC로 전송
- **동작 방식**: PLC 트리거 수신 → 비전 처리 → 결과 차이값을 PLC로 송신

---

# 문제점 및 해결방안

## 1. 엇박자 문제

### 현상
- 4개 라인이 거의 동시에 트리거를 받지만, 일부가 늦게 동작
- PLC에 결과 0를 보내면, 결과가 오지 않은 것으로 착각하는 문제

### 해결방안
- **상태**: PLC 수정으로 배포 진행 중

---

## 2. 타임아웃 문제

### 현상
- 일정시간(3초) 이내에 비전으로부터 결과를 수신하지 못하면 타임아웃 발생

### 원인별 분석 및 해결방안

#### 원인 1: PLC 처리 스텝 과다
- **문제**: PLC 수신 및 결과 수신 스텝이 많아서 처리시간 초과
- **해결**: PLC 데이터를 한번에 수신하고, 최소 스텝으로 결과 송신

#### 원인 2: 스토리지 처리 지연
- **문제**: 스토리지에 결과를 처리할 때 시간초과로 발생
- **해결**: 
  - 이미지 로그 저장기능 OFF로 모니터링 중
  - 향후 쓰레드 분리 예정

#### 원인 3: 전원/네트워크 문제
- **문제**: 
  - 전원/네트워크 문제로 카메라가 리셋되는 현상
  - 소프트트리거 call에서 오류번호 (-304) 리턴
  - 이미지 획득 실패 또는 1초 후 획득되는 현상
  - 현재 타임아웃의 주요 원인으로 분석 중
- **시도한 해결방안**: POE를 통한 전원 안정화 (재발됨)
- **필요사항**: 네트워크 문제 심층 분석 필요
